package geo;

import org.locationtech.jts.geom.*;
import org.locationtech.spatial4j.context.jts.DatelineRule;
import org.locationtech.spatial4j.context.jts.JtsSpatialContext;
import org.locationtech.spatial4j.context.jts.JtsSpatialContextFactory;
import org.locationtech.spatial4j.context.jts.ValidationRule;
import org.locationtech.spatial4j.io.GeoJSONReader;
import org.locationtech.spatial4j.io.WKTReader;
import org.locationtech.spatial4j.io.jts.JtsBinaryCodec;
import org.locationtech.spatial4j.io.jts.JtsGeoJSONWriter;
import org.locationtech.spatial4j.io.jts.JtsWKTWriter;
import org.locationtech.spatial4j.shape.Rectangle;
import org.locationtech.spatial4j.shape.Shape;
import org.locationtech.spatial4j.shape.jts.JtsGeometry;
import org.locationtech.spatial4j.shape.jts.JtsShapeFactory;

import java.text.ParseException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Spatial {

    private final static String shape1 = "POLYGON ((12.445942429915929 41.895293142536325, 12.445431883474049 41.893974644961212, 12.445431883474049 41.893974644961212, 12.445546495940594 41.893966889012461, 12.446234170739858 41.893881573514079, 12.446421718412386 41.893974644961212, 12.446630104715194 41.894230590741515, 12.44780748732606 41.895099247560438, 12.447359456775022 41.895021689370786, 12.446963522799688 41.895060468469381, 12.445942429915929 41.895293142536325))";
    private final static String shape2 = "POLYGON ((11.8748 45.411, 11.8748 45.4097, 11.8749 45.4097, 11.8749 45.411, 11.8748 45.411))";
    private final static String shape3 = "POLYGON ((15.1644508310949 37.6158932654264, 15.1631996121103 37.6157472185257, 15.1631375224208 37.6142508570111, 15.1628922681477 37.6142508570111, 15.1629574623216 37.6160607714572, 15.1643217237003 37.6162335716223, 15.1629901502691 37.6197433836722, 15.165190920305 37.6202667090311, 15.1661628102572 37.6203414697966, 15.1681993981975 37.6199541780343, 15.1674525264071 37.6177583166641, 15.1696072969791 37.6179785325441, 15.1695763225309 37.6176828673564, 15.1673501018266 37.6174571804014, 15.167051648913 37.6165797055361, 15.1686141602805 37.6167778201849, 15.1684851907913 37.6164033926355, 15.1669245612297 37.6162060578258, 15.1659623976338 37.6133772217404, 15.1654152026017 37.6133513382177, 15.1644508310949 37.6158932654264), (15.1665284301375 37.6161559687749, 15.164856431945 37.615944551887, 15.1656898981859 37.6137731969507, 15.1665284301375 37.6161559687749), (15.1647258256749 37.6162848087029, 15.166660077281 37.6165300572084, 15.1669664920325 37.617400765158, 15.1658964641853 37.6172673949249, 15.1659713958864 37.6168393548418, 15.1646139160322 37.6165763568702, 15.1647258256749 37.6162848087029), (15.1676845135934 37.6194410947379, 15.1675482206938 37.6194957386363, 15.1675038314892 37.6196055435107, 15.1675622383373 37.6197924454246, 15.1661581377093 37.6200377541866, 15.1652563359749 37.619962993421, 15.1634807677931 37.6195284464713, 15.1642961067705 37.6174044425203, 15.165557969906 37.6175522080055, 15.1653724361971 37.6186279087646, 15.1652138632506 37.6186598692035, 15.1650753714968 37.6188528495161, 15.1651185082726 37.6190980480309, 15.1653341921514 37.6192092955053, 15.165593012806 37.6192002140788, 15.1657814524054 37.6191116701707, 15.1660941107381 37.6191168046162, 15.1674494178675 37.6187730468828, 15.1676845135934 37.6194410947379), (15.1644193344757 37.6170832827691, 15.1645113596872 37.616843537729, 15.1656435044289 37.617056289761, 15.1656131835566 37.6172320863078, 15.1644193344757 37.6170832827691), (15.1670814015479 37.6177272919591, 15.1673450720207 37.6184765377956, 15.1665937766779 37.6186750241198, 15.1663649910467 37.618027199543, 15.1664446789806 37.617654115125, 15.1670814015479 37.6177272919591), (15.1661581049282 37.6176211799301, 15.1660767489966 37.6179918013965, 15.1663286457667 37.6187450696225, 15.1660622369809 37.6188154527297, 15.1658132373981 37.6188142534536, 15.1657337749164 37.6186893838395, 15.165653045699 37.6186578994447, 15.1658409129631 37.6175847258998, 15.1661581049282 37.6176211799301))";
    private final static String shape4 = "MULTIPOLYGON (((12.035947058863821 44.22394645691697, 12.035869416438256 44.223983499726756, 12.035386661879667 44.223279722566453, 12.034843735469741 44.2227669718168, 12.034926182350814 44.2227017280939, 12.035694307310123 44.22227376980819, 12.036045639797218 44.222626321721343, 12.035336228178622 44.2230254309762, 12.035404497511866 44.22307448269045, 12.035510255090969 44.223239865974257, 12.035860048423679 44.223772111506314, 12.035922273863882 44.223866793231437, 12.035982154590553 44.223932679086957, 12.035947058863821 44.22394645691697)), ((12.036114696937643 44.224014380090217, 12.036657564260949 44.224357221102977, 12.037116966837857 44.224506405177408, 12.03754343748199 44.224109396672695, 12.037601822195327 44.224055045387189, 12.037684609484741 44.223977977344084, 12.037295308803774 44.223674072235717, 12.037510902470933 44.223440982752784, 12.037965445412944 44.223724203418868, 12.037751843766555 44.223906591023116, 12.037825260745393 44.2239451487299, 12.03804486241838 44.2240604808649, 12.038399571581952 44.223955532849828, 12.038556443845891 44.223851259484519, 12.038528079213794 44.223610069385693, 12.039278833636999 44.223181320944221, 12.039375474211894 44.223282460117119, 12.039142158234133 44.223445376075006, 12.038953761890832 44.223509837951148, 12.03871551775819 44.223607430705293, 12.038764775593224 44.223666913777144, 12.038822940113739 44.223805829650416, 12.038456718227865 44.224098092474073, 12.038929983362491 44.224149731150668, 12.039440569069157 44.224676579008353, 12.040433160964609 44.224346616618242, 12.040489643328803 44.224447846665392, 12.039364531215766 44.224779817392871, 12.038842593918428 44.224251404823768, 12.038593227794058 44.224349682883833, 12.038207878065599 44.224603483256637, 12.038414503637025 44.224810086024227, 12.03817008383656 44.225240186060773, 12.037744557805651 44.225446209590658, 12.037574003034463 44.225020131165188, 12.037321118516932 44.225217832326884, 12.037079763092072 44.225195231353638, 12.03699621120594 44.224852654666016, 12.037049136903279 44.224642202514282, 12.03663030686711 44.224495055220018, 12.036529150257978 44.224728366059885, 12.03663685046898 44.225284099699444, 12.03644331108114 44.225300502472727, 12.036356453747201 44.224728410365316, 12.036446856005863 44.224387985622485, 12.036151595128235 44.224232829291424, 12.036009916817251 44.224043588737196, 12.036114696937643 44.224014380090217)))";
    private final static String shape5 = "MULTIPOLYGON (((12.458272245829573 41.901648036057971, 12.458357885456898 41.901646942833111, 12.458532713930987 41.901642075417811, 12.458570710401693 41.901642081125857, 12.459009812533402 41.90163043354957, 12.459334870931777 41.901609134209565, 12.459530789119441 41.901590558855887, 12.459768753670552 41.901572910256569, 12.460645280653194 41.90149495061641, 12.460654502574405 41.901484003703523, 12.460674896395405 41.901482068421707, 12.460715045990369 41.901433842831644, 12.461228722457591 41.900816834009113, 12.461245599582648 41.900796562491095, 12.461641817224118 41.900286717627054, 12.461802677535362 41.900082418221096, 12.461922402127531 41.899937686324321, 12.4619217701129 41.89993708697039, 12.462009793782398 41.899858120221317, 12.462820220009398 41.899805708325729, 12.462896868089851 41.899808663643149, 12.462970516692259 41.899811505770892, 12.46296515836211 41.899899496380165, 12.462975765181042 41.900085421277886, 12.463050231770605 41.900309034999331, 12.463168656518176 41.900595545990527, 12.463267158248952 41.900785753434015, 12.46348799505687 41.9010779031428, 12.463670833425731 41.901289477173478, 12.463901849676441 41.9014481114664, 12.464117699160786 41.901602679962124, 12.464237310536705 41.901695454677672, 12.464359549039393 41.901790268588464, 12.464462342413889 41.901878896253315, 12.464449763139953 41.902056642988043, 12.464443473526689 41.902098163009271, 12.464448227689337 41.902167477543529, 12.464452115115574 41.90240801982042, 12.464451106610696 41.90251821039125, 12.464456549525483 41.903312340442319, 12.464448145907085 41.903439898278975, 12.464432270611084 41.903502166575365, 12.464277322922863 41.90377426610349, 12.46416526773265 41.903894524602066, 12.464056010693835 41.903973149824864, 12.464038821349867 41.90397719362462, 12.463998201000498 41.904004691250037, 12.464003717558805 41.904002710303565, 12.464068423236375 41.903979470596106, 12.464590067427093 41.904215481856554, 12.464934912978435 41.904377735642768, 12.465051092408698 41.904464722225178, 12.465170105008795 41.904491708970518, 12.465172122903288 41.90449482001204, 12.465184176038692 41.90449249977663, 12.465259652913199 41.904530949201167, 12.465309434532003 41.904560701533349, 12.465375910487559 41.904610435361221, 12.465498509389555 41.904736866331021, 12.465999501462132 41.905268615454055, 12.466128560183197 41.905406674369274, 12.466217869652324 41.905406738820972, 12.466275239248482 41.905375600832727, 12.466612032863473 41.905113138102159, 12.46672534581859 41.9050610796985, 12.466907755190945 41.90493206900824, 12.467260160474785 41.904667255288672, 12.46734332556084 41.904629059947432, 12.467780343394208 41.904529591231167, 12.46818275557156 41.904398283515441, 12.468685857007605 41.90431460092703, 12.468751130020538 41.904280514698748, 12.468921850508146 41.904224811335354, 12.469112522549537 41.904082487707143, 12.469227188476339 41.90387784048162, 12.469461303743616 41.903515976730539, 12.469597321853044 41.903337883628851, 12.46969479287576 41.903250950005166, 12.46959259815368 41.903194168898153, 12.469816660664117 41.9028482511634, 12.470675366061778 41.903054475300443, 12.47117991600541 41.903220837464893, 12.471675316727845 41.903356960585853, 12.471989967915698 41.903468001808363, 12.472108975533938 41.903501129420633, 12.472044174507944 41.903844662782028, 12.472073125101186 41.903877337219328, 12.472313016864952 41.90400084266993, 12.472419902329941 41.904040367956661, 12.472915563317729 41.90441018453096, 12.4730927338349 41.904640926901145, 12.47309465178262 41.904836395147072, 12.473116826833731 41.904957510134253, 12.473163385658482 41.905005812889321, 12.472793329981446 41.905124408213155, 12.471605936929977 41.904780044344427, 12.471125535098933 41.905260623240196, 12.470987919967817 41.905157669877461, 12.4690379895287 41.90455271101591, 12.468834889019067 41.90460512903784, 12.468366672591198 41.905373106570948, 12.468303775099161 41.905467852034924, 12.467888142545617 41.905498047292504, 12.46684684659234 41.905558230940436, 12.466034062448603 41.905628956909993, 12.465274605722243 41.905682125716396, 12.464711245648477 41.9057243550819, 12.46330942809003 41.905794752960254, 12.463018093320708 41.9064502787395, 12.462969086502648 41.906566071995726, 12.462939213086011 41.906687461937693, 12.462742266473876 41.907278684836037, 12.464949528161394 41.907823239162518, 12.46696426800886 41.908349725232213, 12.467719672577648 41.908570821818778, 12.467859836026069 41.908617303296651, 12.470850899148525 41.909326000850413, 12.470693167747914 41.90988604079682, 12.4712368776636 41.910041672335417, 12.470950503522605 41.9106000710232, 12.470739715144166 41.910909440124975, 12.47066237088797 41.911084066993318, 12.470594058515932 41.9112672640955, 12.470493658309023 41.911534457253879, 12.470357994673087 41.911812281465011, 12.470219077405298 41.912064487136455, 12.470054596522576 41.912394760600975, 12.469675355358611 41.91331852209543, 12.469672875993783 41.913329640007781, 12.469558188043148 41.9136540160228, 12.469552441301046 41.9136641847354, 12.469552516560283 41.913664416041975, 12.469479157844596 41.913850615154686, 12.469376728567951 41.913787050913214, 12.469213830599191 41.913819606356853, 12.469327568665264 41.913936216395008, 12.469094685691351 41.913843612698422, 12.468791294532663 41.913772218149, 12.46871665603889 41.913750817649465, 12.468582844343908 41.913616972415525, 12.468413358182712 41.913576725105088, 12.468407315350314 41.913572086207452, 12.468303897656163 41.91355073139534, 12.468295245966344 41.913548677232612, 12.467944653804715 41.913459926198428, 12.467863525902088 41.9134395256948, 12.467429697714477 41.913327804394953, 12.467305989090276 41.9132956226279, 12.466681732562398 41.913141241842162, 12.466267083976899 41.913046761444022, 12.465834446270682 41.912949270627969, 12.465451269882386 41.912862923749167, 12.465266154010379 41.912818309123729, 12.464613055890993 41.9126595219514, 12.464379238772487 41.912599318005668, 12.464152508902782 41.912540276139623, 12.463755453460584 41.912446724798379, 12.463331577552644 41.9123477881632, 12.463146466075097 41.912303168421985, 12.462349134375156 41.912107829668507, 12.461146380843759 41.911813152790657, 12.460964282848705 41.911768598007185, 12.46051775326465 41.91165822127563, 12.460179833606501 41.9115637210511, 12.45966094057793 41.911418607181751, 12.459536767795393 41.911389656067556, 12.458762456728309 41.911210292000469, 12.458329211562591 41.911102375840329, 12.458326952726443 41.911118276838309, 12.458205940974388 41.911088692747938, 12.458256880863965 41.911548679586815, 12.458257145288433 41.911551069271695, 12.457958318100388 41.911485912716522, 12.456220964230669 41.911039105760317, 12.454935634428425 41.9107409250242, 12.454978488152562 41.910546306966317, 12.454994096371497 41.910503296623681, 12.455040219673757 41.910376195273827, 12.454944279001284 41.910360675102574, 12.454816840826606 41.910329113149508, 12.454816948480802 41.910328679657766, 12.454978782350898 41.909673893671865, 12.455017225986106 41.909541311295307, 12.455190638178834 41.90883794607219, 12.455230898500009 41.908659654553354, 12.455318990451584 41.908305143164277, 12.455328194758625 41.908267535613071, 12.455506094433733 41.907557601377832, 12.455524101752781 41.907492928504205, 12.455524363477913 41.9074919850984, 12.455637348787445 41.906972124504435, 12.455763826315598 41.906422123345877, 12.455828722893024 41.906330155959715, 12.455950290889016 41.9062890099663, 12.456601151072737 41.906156656876426, 12.45750788791541 41.905942282680634, 12.457644527009485 41.905907184742439, 12.457781668692194 41.905853076864396, 12.457811625114511 41.905632148539766, 12.457731358675277 41.904971154484784, 12.45769112920296 41.904156978149452, 12.457648470767017 41.903423380282113, 12.457766438296796 41.903412484925106, 12.458017530888608 41.903363855537457, 12.45825852943592 41.90331531543562, 12.458282876031404 41.903147754501248, 12.458291009896232 41.903104398887052, 12.458349505882282 41.903035867178005, 12.458435463746866 41.902870229062579, 12.45845401093068 41.902791868019342, 12.458463424089246 41.90274354971563, 12.458446784386844 41.9027033630318, 12.458484400115987 41.90263587639226, 12.458788521080944 41.902642611056145, 12.458826689636705 41.902638112197046, 12.458888598859495 41.902626817301787, 12.458971326440659 41.902592625925479, 12.459029965169083 41.90255790113406, 12.45905857186631 41.902514137797745, 12.459082247761806 41.902455492191592, 12.459082405114955 41.902351370782881, 12.45907526111796 41.902247089516059, 12.459065856805402 41.902184955712208, 12.4590354121721 41.902116738242626, 12.458999717201555 41.902074209693588, 12.458937412112242 41.9020302291806, 12.45886085737726 41.901998060300848, 12.458745559092502 41.901989938052139, 12.45862132111507 41.901989346485813, 12.458357374606003 41.901992582582082, 12.458298306641844 41.901857259289422, 12.458237892180216 41.901778230127945, 12.458179325996753 41.901706943619331, 12.458132232911979 41.901655603250276, 12.458269162316423 41.901650402929462, 12.458272245829573 41.901648036057971)), ((12.5097729749065 41.885869740927511, 12.509147312456481 41.885618929994536, 12.509452122368028 41.885475609019331, 12.511363514998669 41.8838594154752, 12.511943804600136 41.883367833388604, 12.51334024970612 41.882213873201955, 12.513190054441228 41.8819581726544, 12.513262246262386 41.88155804453681, 12.5135109069797 41.881325132986284, 12.513919993966253 41.881169858147615, 12.514361166206649 41.881199718722812, 12.514574086893093 41.881224144729195, 12.514940461298524 41.8813862249826, 12.515074694822937 41.881823985422045, 12.515056155109757 41.882007868341688, 12.514668473204454 41.882417255960014, 12.513751546383553 41.882501626234323, 12.513262445266953 41.882787091317553, 12.512403126715538 41.883477503790729, 12.511771746353983 41.884001496994792, 12.511397815446875 41.884320268006476, 12.510760423396381 41.884869018001012, 12.5097729749065 41.885869740927511)), ((12.476121065097795 41.915083976046475, 12.475917452425554 41.914821126154052, 12.47564699127285 41.914723743490342, 12.47518680481638 41.914654485296637, 12.474979979442688 41.914596770077807, 12.475016173883084 41.914492882552381, 12.476001904450522 41.914693451766411, 12.476473331705018 41.915006654858523, 12.476121065097795 41.915083976046475)), ((12.47436980822264 41.915073669258781, 12.473730261976192 41.914950846219035, 12.472963801815153 41.914797232567764, 12.473480495483404 41.913369347400142, 12.472425686077566 41.913142329334, 12.472704900332051 41.912395857457966, 12.473044787038326 41.911145755880469, 12.474769045984104 41.911575169147213, 12.474969185491513 41.911609388364425, 12.475742079459968 41.911774543424229, 12.475683979796699 41.912021138368409, 12.47436980822264 41.915073669258781)), ((12.471784527419114 41.914437091034273, 12.471836233762536 41.914338974796493, 12.471916378594845 41.914215848324559, 12.47211286269985 41.91386378225323, 12.472208519435187 41.91385608680357, 12.47303065029562 41.914085026187522, 12.472989285220882 41.914148513435549, 12.472611828913889 41.914036929746665, 12.472164569043276 41.91394073675643, 12.472146453425001 41.913944857306248, 12.471913793277672 41.914417852568612, 12.471784527419114 41.914437091034273)), ((12.463847096400622 41.830939928456658, 12.464535682816626 41.830736816713291, 12.465018128475823 41.830575094988333, 12.465328950336696 41.83044312492428, 12.465635271755623 41.8303514807577, 12.465987924923056 41.830266059964529, 12.46624265159968 41.830185086390451, 12.466432978033447 41.83012883378219, 12.466543971081494 41.830220460195811, 12.466568847524591 41.830606249224914, 12.46705760969056 41.831582133197081, 12.467057931340563 41.83158219072736, 12.467615100940098 41.832678778123679, 12.467346535035839 41.832753163018005, 12.46738244786094 41.83282965518233, 12.467389222697046 41.832832492007654, 12.467391547486034 41.832836076305291, 12.467571112316516 41.8332313135959, 12.467553048819786 41.833268178723564, 12.467061784669648 41.8334063979019, 12.46705648226634 41.833404452708152, 12.467056105394516 41.833404756896265, 12.467001673099483 41.833422466349816, 12.467068721961059 41.833546291600058, 12.467235242064779 41.8338511863538, 12.467304287172057 41.833995555590427, 12.467420792820867 41.834199974802431, 12.467790810905703 41.83481989351165, 12.467885607321266 41.834943093856431, 12.468272952214136 41.83565034313898, 12.468296376809651 41.835688124287813, 12.468094788005766 41.835745785315574, 12.467881468284357 41.835330833470508, 12.465752014331091 41.835990627616695, 12.465183316339449 41.836148119901175, 12.464867837537934 41.836257502615766, 12.464843488328349 41.836179599003692, 12.46483886546147 41.836161631054473, 12.46466524089255 41.835755177095159, 12.464458632819662 41.835310742414471, 12.464368043970143 41.835160103058371, 12.463317872654281 41.835438481464763, 12.463300602759917 41.835441406784518, 12.463137212950988 41.835493808933109, 12.463136098667441 41.835491471599234, 12.463064900525785 41.835342150444767, 12.463055005120472 41.835339017449996, 12.462868030588091 41.8349724823839, 12.462640167050148 41.834474789434125, 12.462519335984465 41.834238110760289, 12.461720710377561 41.833143247125861, 12.4616847532225 41.833041543901, 12.461677059255482 41.83303375659942, 12.461305258810953 41.831735785066236, 12.461293906604855 41.831712165555921, 12.461465206027981 41.83162752512316, 12.461596652149334 41.831597953974764, 12.461998635474533 41.831472610630755, 12.463847096400622 41.830939928456658)))";
    private final static String shape6 = "LINESTRING (12.921272 43.9007406306, 12.9213155166 43.9007403569, 12.9213590199 43.9007395361, 12.9214024967 43.9007381683, 12.9214459338 43.9007362539, 12.9214893178 43.9007337936, 12.9215326357 43.9007307881, 12.9215758742 43.9007272384, 12.9216190201 43.9007231454, 12.9216620602 43.9007185104, 12.9217049816 43.9007133349, 12.921747771 43.9007076204, 12.9217904155 43.9007013687, 12.9218329021 43.9006945817, 12.9218752178 43.9006872614, 12.9219173498 43.9006794101, 12.9219592852 43.9006710301, 12.9220010111 43.900662124, 12.922042515 43.9006526946, 12.9220837842 43.9006427447, 12.9221248061 43.9006322773, 12.9221655682 43.9006212957, 12.922206058 43.9006098031, 12.9222462633 43.900597803, 12.9222861719 43.9005852992, 12.9223257714 43.9005722954, 12.92236505 43.9005587956, 12.9224039956 43.900544804, 12.9224425963 43.9005303247, 12.9224808404 43.9005153621, 12.9225187163 43.9004999209, 12.9225562124 43.9004840058, 12.9225933173 43.9004676215, 12.9226300196 43.9004507731, 12.9226663083 43.9004334658, 12.9227021722 43.9004157047, 12.9227376004 43.9003974953, 12.9227725822 43.9003788432, 12.9228071068 43.9003597539, 12.9228411638 43.9003402335, 12.9228747428 43.9003202877, 12.9229078335 43.9002999226, 12.9229404259 43.9002791446, 12.9229725101 43.9002579598, 12.9230040762 43.9002363748, 12.9230351147 43.9002143961, 12.9230656161 43.9001920304, 12.9230955711 43.9001692846, 12.9231249705 43.9001461655, 12.9231538056 43.9001226803, 12.9231820673 43.900098836, 12.9232097473 43.9000746399, 12.9232368369 43.9000500994, 12.923263328 43.900025222, 12.9232892124 43.9000000152, 12.9233144824 43.8999744868, 12.9233391302 43.8999486444, 12.9233631483 43.8999224961, 12.9233865293 43.8998960497, 12.9234092663 43.8998693132, 12.9234313521 43.899842295, 12.9234527802 43.899815003, 12.923473544 43.8997874458, 12.9234936371 43.8997596317, 12.9235130535 43.8997315691, 12.9235317872 43.8997032666, 12.9235498325 43.8996747329, 12.9235671839 43.8996459765, 12.9235838362 43.8996170064, 12.9235997842 43.8995878312, 12.9236150232 43.8995584599, 12.9236295484 43.8995289015, 12.9236433555 43.8994991649, 12.9236564402 43.8994692592, 12.9236687986 43.8994391935, 12.9236804268 43.8994089769, 12.9236913215 43.8993786188, 12.9237014791 43.8993481282, 12.9237108967 43.8993175146, 12.9237195714 43.8992867872, 12.9237275005 43.8992559553, 12.9237346816 43.8992250285, 12.9237411126 43.8991940161, 12.9237467914 43.8991629275, 12.9237517164 43.8991317722, 12.923755886 43.8991005598, 12.923759299 43.8990692996, 12.9237619543 43.8990380013, 12.9237638512 43.8990066744, 12.923764989 43.8989753284, 12.9237653675 43.8989439729, 12.9237649864 43.8989126174, 12.923763846 43.8988812714, 12.9237619465 43.8988499446, 12.9237592885 43.8988186464, 12.9237558729 43.8987873864, 12.9237517007 43.8987561742, 12.9237467732 43.8987250191, 12.9237410918 43.8986939308, 12.9237346584 43.8986629186, 12.9237274748 43.8986319921, 12.9237195432 43.8986011606, 12.9237108661 43.8985704336, 12.9237014461 43.8985398203, 12.9236912861 43.8985093302, 12.9236803892 43.8984789725, 12.9236687587 43.8984487565, 12.9236563981 43.8984186913, 12.9236433113 43.8983887861, 12.9236295021 43.8983590501, 12.9236149748 43.8983294922, 12.9235997339 43.8983001216, 12.9235837839 43.898270947, 12.9235671298 43.8982419775, 12.9235497766 43.8982132219, 12.9235317295 43.8981846888, 12.9235129942 43.8981563871, 12.9234935763 43.8981283253, 12.9234734816 43.8981005119, 12.9234527164 43.8980729555, 12.923431287 43.8980456644, 12.9234091999 43.8980186469, 12.9233864617 43.8979919114, 12.9233630795 43.8979654658, 12.9233390604 43.8979393183, 12.9233144117 43.8979134769, 12.9232891409 43.8978879493, 12.9232632556 43.8978627434, 12.9232367639 43.8978378669, 12.9232096737 43.8978133274, 12.9231819933 43.8977891322, 12.9231537311 43.8977652889, 12.9231248957 43.8977418045, 12.923095496 43.8977186864, 12.9230655409 43.8976959415, 12.9230350394 43.8976735768, 12.923004001 43.897651599, 12.922972435 43.897630015, 12.9229403511 43.8976088312, 12.922907759 43.897588054, 12.9228746687 43.8975676899, 12.9228410902 43.8975477451, 12.9228070338 43.8975282255, 12.9227725098 43.8975091372, 12.9227375289 43.897490486, 12.9227021015 43.8974722775, 12.9226662385 43.8974545173, 12.9226299509 43.8974372108, 12.9225932496 43.8974203633, 12.922556146 43.8974039798, 12.9225186512 43.8973880655, 12.9224807766 43.8973726251, 12.9224425339 43.8973576634, 12.9224039347 43.8973431849, 12.9223649907 43.8973291939, 12.9223257138 43.8973156949, 12.922286116 43.8973026918, 12.9222462092 43.8972901887, 12.9222060058 43.8972781893, 12.9221655178 43.8972666974, 12.9221247577 43.8972557163, 12.9220837379 43.8972452496, 12.9220424708 43.8972353002, 12.9220009691 43.8972258713, 12.9219592453 43.8972169658, 12.9219173122 43.8972085863, 12.9218751825 43.8972007355, 12.9218328692 43.8971934156, 12.9217903849 43.8971866289, 12.9217477429 43.8971803776, 12.9217049559 43.8971746635, 12.921662037 43.8971694883, 12.9216189993 43.8971648536, 12.921575856 43.8971607608, 12.92153262 43.8971572113, 12.9214893048 43.8971542059, 12.9214459233 43.8971517458, 12.9214024888 43.8971498316, 12.9213590146 43.8971484639, 12.9213155139 43.8971476431, 12.921272 43.8971473694, 12.9212284861 43.8971476431, 12.9211849854 43.8971484639, 12.9211415112 43.8971498316, 12.9210980767 43.8971517458, 12.9210546952 43.8971542059, 12.92101138 43.8971572113, 12.920968144 43.8971607608, 12.9209250007 43.8971648536, 12.920881963 43.8971694883, 12.9208390441 43.8971746635, 12.9207962571 43.8971803776, 12.9207536151 43.8971866289, 12.9207111308 43.8971934156, 12.9206688175 43.8972007355, 12.9206266878 43.8972085863, 12.9205847547 43.8972169658, 12.9205430309 43.8972258713, 12.9205015292 43.8972353002, 12.9204602621 43.8972452496, 12.9204192423 43.8972557163, 12.9203784822 43.8972666974, 12.9203379942 43.8972781893, 12.9202977908 43.8972901887, 12.920257884 43.8973026918, 12.9202182862 43.8973156949, 12.9201790093 43.8973291939, 12.9201400653 43.8973431849, 12.9201014661 43.8973576634, 12.9200632234 43.8973726251, 12.9200253488 43.8973880655, 12.919987854 43.8974039798, 12.9199507504 43.8974203633, 12.9199140491 43.8974372108, 12.9198777615 43.8974545173, 12.9198418985 43.8974722775, 12.9198064711 43.897490486, 12.9197714902 43.8975091372, 12.9197369662 43.8975282255, 12.9197029098 43.8975477451, 12.9196693313 43.8975676899, 12.919636241 43.897588054, 12.9196036489 43.8976088312, 12.919571565 43.897630015, 12.919539999 43.897651599, 12.9195089606 43.8976735768, 12.9194784591 43.8976959415, 12.919448504 43.8977186864, 12.9194191043 43.8977418045, 12.9193902689 43.8977652889, 12.9193620067 43.8977891322, 12.9193343263 43.8978133274, 12.9193072361 43.8978378669, 12.9192807444 43.8978627434, 12.9192548591 43.8978879493, 12.9192295883 43.8979134769, 12.9192049396 43.8979393183, 12.9191809205 43.8979654658, 12.9191575383 43.8979919114, 12.9191348001 43.8980186469, 12.919112713 43.8980456644, 12.9190912836 43.8980729555, 12.9190705184 43.8981005119, 12.9190504237 43.8981283253, 12.9190310058 43.8981563871, 12.9190122705 43.8981846888, 12.9189942234 43.8982132219, 12.9189768702 43.8982419775, 12.9189602161 43.898270947, 12.9189442661 43.8983001216, 12.9189290252 43.8983294922, 12.9189144979 43.8983590501, 12.9189006887 43.8983887861, 12.9188876019 43.8984186913, 12.9188752413 43.8984487565, 12.9188636108 43.8984789725, 12.9188527139 43.8985093302, 12.9188425539 43.8985398203, 12.9188331339 43.8985704336, 12.9188244568 43.8986011606, 12.9188165252 43.8986319921, 12.9188093416 43.8986629186, 12.9188029082 43.8986939308, 12.9187972268 43.8987250191, 12.9187922993 43.8987561742, 12.9187881271 43.8987873864, 12.9187847115 43.8988186464, 12.9187820535 43.8988499446, 12.918780154 43.8988812714, 12.9187790136 43.8989126174, 12.9187786325 43.8989439729, 12.918779011 43.8989753284, 12.9187801488 43.8990066744, 12.9187820457 43.8990380013, 12.918784701 43.8990692996, 12.918788114 43.8991005598, 12.9187922836 43.8991317722, 12.9187972086 43.8991629275, 12.9188028874 43.8991940161, 12.9188093184 43.8992250285, 12.9188164995 43.8992559553, 12.9188244286 43.8992867872, 12.9188331033 43.8993175146, 12.9188425209 43.8993481282, 12.9188526785 43.8993786188, 12.9188635732 43.8994089769, 12.9188752014 43.8994391935, 12.9188875598 43.8994692592, 12.9189006445 43.8994991649, 12.9189144516 43.8995289015, 12.9189289768 43.8995584599, 12.9189442158 43.8995878312, 12.9189601638 43.8996170064, 12.9189768161 43.8996459765, 12.9189941675 43.8996747329, 12.9190122128 43.8997032666, 12.9190309465 43.8997315691, 12.9190503629 43.8997596317, 12.919070456 43.8997874458, 12.9190912198 43.899815003, 12.9191126479 43.899842295, 12.9191347337 43.8998693132, 12.9191574707 43.8998960497, 12.9191808517 43.8999224961, 12.9192048698 43.8999486444, 12.9192295176 43.8999744868, 12.9192547876 43.9000000152, 12.919280672 43.900025222, 12.9193071631 43.9000500994, 12.9193342527 43.9000746399, 12.9193619327 43.900098836, 12.9193901944 43.9001226803, 12.9194190295 43.9001461655, 12.9194484289 43.9001692846, 12.9194783839 43.9001920304, 12.9195088853 43.9002143961, 12.9195399238 43.9002363748, 12.9195714899 43.9002579598, 12.9196035741 43.9002791446, 12.9196361665 43.9002999226, 12.9196692572 43.9003202877, 12.9197028362 43.9003402335, 12.9197368932 43.9003597539, 12.9197714178 43.9003788432, 12.9198063996 43.9003974953, 12.9198418278 43.9004157047, 12.9198776917 43.9004334658, 12.9199139804 43.9004507731, 12.9199506827 43.9004676215, 12.9199877876 43.9004840058, 12.9200252837 43.9004999209, 12.9200631596 43.9005153621, 12.9201014037 43.9005303247, 12.9201400044 43.900544804, 12.92017895 43.9005587956, 12.9202182286 43.9005722954, 12.9202578281 43.9005852992, 12.9202977367 43.900597803, 12.920337942 43.9006098031, 12.9203784318 43.9006212957, 12.9204191939 43.9006322773, 12.9204602158 43.9006427447, 12.920501485 43.9006526946, 12.9205429889 43.900662124, 12.9205847148 43.9006710301, 12.9206266502 43.9006794101, 12.9206687822 43.9006872614, 12.9207110979 43.9006945817, 12.9207535845 43.9007013687, 12.920796229 43.9007076204, 12.9208390184 43.9007133349, 12.9208819398 43.9007185104, 12.9209249799 43.9007231454, 12.9209681258 43.9007272384, 12.9210113643 43.9007307881, 12.9210546822 43.9007337936, 12.9210980662 43.9007362539, 12.9211415033 43.9007381683, 12.9211849801 43.9007395361, 12.9212284834 43.9007403569, 12.921272 43.9007406306)";
    private final static String shape7 = "POLYGON ((12.466694389174332 41.934495020181672, 12.465444325649145 41.9338171289559, 12.46452590169633 41.933068057613283, 12.463732997710167 41.932571510135858, 12.463586308678105 41.932362913556553, 12.463319901407125 41.93215020002576, 12.463717874986413 41.932016950089313, 12.462423644665384 41.9306074050529, 12.461987479650197 41.929942520984184, 12.461601681643586 41.929193805347978, 12.461449994674219 41.928896997524205, 12.461270651325599 41.92836785796991, 12.461215111756177 41.9274666406619, 12.461274721612202 41.926940755483116, 12.46147817741122 41.926457740867448, 12.461743091341194 41.92605490992031, 12.462157869481715 41.925564123127387, 12.46249980897565 41.925272729882487, 12.462812024720659 41.925011062467526, 12.46312754128485 41.924826405459847, 12.463948168635492 41.924441604905041, 12.464400792440429 41.924231836146888, 12.465337723008076 41.923932073566348, 12.466247888377586 41.923725265668317, 12.467436176875786 41.923518462504177, 12.468102280275593 41.923358906154085, 12.468490991991491 41.923229156322428, 12.469490530847052 41.922685402631743, 12.470053380831798 41.922184464342479, 12.470455187046314 41.921695152747795, 12.470756311423692 41.921297327306661, 12.471123924320379 41.920614878695559, 12.471551279063325 41.919782862838893, 12.471854424275506 41.9191127880551, 12.471889991334375 41.91892020535947, 12.471889598792039 41.918704318937628, 12.472151218253856 41.918513829182587, 12.472049320338074 41.918406477211846, 12.472068449617975 41.918184395751787, 12.472111381102422 41.917864023916906, 12.47207515195681 41.917675389542076, 12.472042885344786 41.91752045471496, 12.471980685931285 41.917218547120974, 12.471959851685202 41.917109341523542, 12.471928710830831 41.916959375630469, 12.471887972913786 41.916750871451612, 12.471841666752617 41.91647543628418, 12.471798860907327 41.916269456099776, 12.471739430832992 41.915987120663829, 12.471813728171751 41.915691511318016, 12.471873811088582 41.91526002553794, 12.471873103532483 41.915248297032271, 12.472014596984319 41.914900794087977, 12.471874962399069 41.91457065297741, 12.472933252409543 41.914802376067833, 12.474341791554322 41.915075876460605, 12.472752343414507 41.918815176341319, 12.473620415538726 41.918794793053777, 12.473728134365651 41.919231864497029, 12.47372382181806 41.919236125652517, 12.473702747098194 41.91928475398543, 12.473702503148681 41.9192858022907, 12.473572477487043 41.91958533656728, 12.473539060641146 41.919662568359868, 12.473496150851998 41.919785213493938, 12.473400733374813 41.920062370952756, 12.473280642892234 41.92041203629303, 12.473261390777166 41.920464937377055, 12.473134146097054 41.920804082968345, 12.473008284459258 41.921141666630028, 12.472986041679951 41.921198255408996, 12.472867716121588 41.921492135925767, 12.472778752464317 41.921657891214437, 12.472735718011451 41.921764103139658, 12.472309574356009 41.922927821537542, 12.472269147008019 41.923036554665046, 12.472119835567826 41.923441830348374, 12.472030516962576 41.923904711683186, 12.472033257912869 41.92402713793755, 12.472383482827365 41.924444244992891, 12.472408700405706 41.924474179060333, 12.472408928449783 41.924474450654017, 12.471686372582869 41.924507462391112, 12.471664191031374 41.92457144325607, 12.471431459400481 41.925136470364741, 12.471403970909307 41.925208090899467, 12.471124438093312 41.925881882513259, 12.470991635438519 41.926202361795681, 12.470857417024519 41.926527625981805, 12.470820932236048 41.926619593826679, 12.470648200607515 41.927060534457269, 12.470609091123213 41.927150729674089, 12.47053868384455 41.92733524398313, 12.470388852606753 41.927510566874851, 12.470089740325179 41.928257174178619, 12.470014447751497 41.928431027466324, 12.469655582447341 41.92925485079612, 12.469660575054888 41.929257205121708, 12.469613849704782 41.929371968140359, 12.46946800915685 41.929730437797751, 12.46938777232968 41.929932396627827, 12.469287896427391 41.930182924406147, 12.469288582567634 41.930183048507928, 12.469288573172008 41.930183072616252, 12.46928674270713 41.9301878836491, 12.469234783549206 41.930324404249, 12.469095342925344 41.930671915812553, 12.468795044190726 41.931404544060513, 12.468746653034776 41.931521394386941, 12.468679971634602 41.931702698871106, 12.468622632696 41.931843256631993, 12.468540013711674 41.932035475639445, 12.46832659945844 41.932537836399106, 12.468250859207448 41.932753737166045, 12.468243302339893 41.932777014215624, 12.468200339115736 41.932853593229986, 12.468124227788159 41.933088205971792, 12.468071663268812 41.933194026402006, 12.46802225047937 41.933307028192644, 12.468007878669644 41.933420981471805, 12.467982831612042 41.93350242167282, 12.4680087987243 41.933749207426366, 12.468012387856993 41.933783313957363, 12.468011116690857 41.933793552466412, 12.468012617150722 41.933822258089371, 12.46799288684085 41.933940378057024, 12.467977208266914 41.934066651173907, 12.467970336241773 41.934106139255881, 12.467962574513756 41.93412184692901, 12.467951165959422 41.934190143370728, 12.467766634052298 41.93456031371651, 12.467600898539365 41.934822127484694, 12.466694389174332 41.934495020181672), (12.464383693758483 41.931525811498588, 12.46495529614605 41.931149479646045, 12.464832940363397 41.930917158155353, 12.464642534344366 41.930703954689641, 12.464603896814674 41.9306604939065, 12.464405392788356 41.930406319610157, 12.463008947921534 41.928858451664588, 12.462460375705625 41.929217000698252, 12.46365503767977 41.930731028629566, 12.463912532685031 41.931013619251914, 12.464058629141917 41.931179368908516, 12.464383693758483 41.931525811498588))";
    private final static String shape8 = "MULTIPOLYGON (((12.467688255012035 41.885693848133087, 12.468464814126492 41.885950967669487, 12.469196900725365 41.885896570980549, 12.469591960310936 41.885946847498417, 12.471536546945572 41.886282727122307, 12.472183510661125 41.88715698570013, 12.472324222326279 41.887263633310795, 12.471839800477028 41.887341305613518, 12.471875227987766 41.887518614530563, 12.472418576478958 41.887440592050552, 12.472467809915543 41.887541174888611, 12.47277769446373 41.8879599198699, 12.473076216876507 41.889307498931885, 12.473117873072624 41.889541685581207, 12.473010145127773 41.889580652117729, 12.472953982651234 41.889873199164867, 12.472936078906059 41.890061862766743, 12.472838647663593 41.890074655413628, 12.472429476678371 41.890129648149014, 12.471763879060745 41.890325963497162, 12.471539363265038 41.890365585684776, 12.471598699688911 41.890522539615631, 12.471789747476578 41.890810951590538, 12.471577361226082 41.890886172652245, 12.471362426877022 41.891001895070076, 12.470810666680336 41.891344137489796, 12.470285393297672 41.891853913664818, 12.470079615712166 41.89179639518261, 12.470009297132492 41.891880698502064, 12.469673283398151 41.892076916992664, 12.469638504087925 41.892210252583027, 12.469557583332062 41.892281234264374, 12.469435192644596 41.892389759421349, 12.469324059784412 41.892387039959431, 12.467951200902462 41.893401488661766, 12.466476567089558 41.894761174917221, 12.466187193989754 41.894999414682388, 12.465868204832077 41.895258523523808, 12.465326882898808 41.895642556250095, 12.464998796582222 41.895939901471138, 12.464780889451504 41.896226420998573, 12.4644048884511 41.896725185215473, 12.463764682412148 41.897577323019505, 12.463239245116711 41.898287378251553, 12.463042058050632 41.89819061756134, 12.462998032569885 41.89819772541523, 12.462855935096741 41.898361317813396, 12.462797775864601 41.898183152079582, 12.462057210505009 41.897916689515114, 12.462390169501305 41.896685175597668, 12.462446197867393 41.896403945982456, 12.461320765316486 41.895694710314274, 12.46141079813242 41.893965609371662, 12.46216145157814 41.892282411456108, 12.46352843940258 41.889216981828213, 12.46392123401165 41.888811573386192, 12.465751573443413 41.889140665531158, 12.466389551758766 41.889525875449181, 12.466933123767376 41.889251373708248, 12.467421442270279 41.888842917978764, 12.467294409871101 41.887831456959248, 12.467159569263458 41.887763291597366, 12.467008076608181 41.887624993920326, 12.466269865632057 41.887045860290527, 12.466150097548962 41.886623412370682, 12.467688255012035 41.885693848133087)), ((12.474479973316193 41.883996620774269, 12.474848434329033 41.884226053953171, 12.475222766399384 41.884449556469917, 12.475582510232925 41.88468349725008, 12.477996714413166 41.886732801795006, 12.478294029831886 41.887156754732132, 12.478497952222824 41.887423731386662, 12.4786731377244 41.88795281201601, 12.47866740077734 41.888098739087582, 12.478550605475903 41.888583034276962, 12.478374227881432 41.888832710683346, 12.478018157184124 41.889144755899906, 12.477909922599792 41.889070779085159, 12.477488748729229 41.889065615832806, 12.477545402944088 41.889318056404591, 12.477392561733723 41.889393299818039, 12.47734110057354 41.889459110796452, 12.476878941059113 41.889613263309, 12.476773627102375 41.889598779380322, 12.476521015167236 41.889683350920677, 12.476525671780109 41.889690697193146, 12.475759111344814 41.889936529099941, 12.475579977035522 41.889513544738293, 12.474854730069637 41.889585264027119, 12.474739409983158 41.889353580772877, 12.474282443523407 41.889394111931324, 12.474173255264759 41.888862542808056, 12.474582016468048 41.888749308884144, 12.474515065550804 41.888654619455338, 12.474076345562935 41.888774424791336, 12.473286159336567 41.887703888118267, 12.473966002464294 41.887403279542923, 12.473596930503845 41.886862479150295, 12.472830578684807 41.887220025062561, 12.472243450582027 41.886573724448681, 12.472523540258408 41.886160127818584, 12.4729495793581 41.885587841272354, 12.472983308136463 41.88564670830965, 12.473304815590382 41.885467238724232, 12.473233178257942 41.885403744876385, 12.473037421703339 41.885113753378391, 12.472622483968735 41.885186180472374, 12.472349718213081 41.884807504713535, 12.472263813018799 41.884802110493183, 12.471867948770523 41.885056272149086, 12.471597693860531 41.885294735431671, 12.471242614090443 41.885428115725517, 12.47107569873333 41.885243616998196, 12.471857003867626 41.884782858192921, 12.47223112732172 41.884684085845947, 12.47257050126791 41.884793594479561, 12.473252348601818 41.884564518928528, 12.473686806857586 41.884525537490845, 12.474011801183224 41.884397096931934, 12.474479973316193 41.883996620774269), (12.478122137486935 41.888472817838192, 12.477988719940186 41.888505205512047, 12.477980017662048 41.88854406774044, 12.478046730160713 41.888589411973953, 12.478101834654808 41.888580776751041, 12.478122137486935 41.888472817838192)), ((12.477300427854061 41.875819563865662, 12.477947510778904 41.8760394603014, 12.479474790394306 41.876571141183376, 12.480365075170994 41.877346031367779, 12.479508727788925 41.877927698194981, 12.479235582053661 41.878358207643032, 12.479083113372326 41.878569111227989, 12.479095280170441 41.878547340631485, 12.478903189301491 41.878729701042175, 12.478880385859187 41.878720248116345, 12.478883780539036 41.878715217113495, 12.477433429965853 41.878120427854448, 12.476010158658028 41.877530425786972, 12.476149007678032 41.877399921417236, 12.477300427854061 41.875819563865662)), ((12.472538508474827 41.872948758304119, 12.474250644445419 41.873042851686478, 12.47633358836174 41.874068386852741, 12.477605372667313 41.874688640236855, 12.477354012429714 41.875019364058971, 12.476029247045517 41.874403513967991, 12.475626356899738 41.874407231807709, 12.475351564586163 41.8745621368289, 12.475166127085686 41.874710343778133, 12.474756546318531 41.875055111944675, 12.474459037184715 41.874967768788338, 12.473277106881142 41.876469790935516, 12.473576873540878 41.876643337309361, 12.472871653735638 41.8775934651494, 12.473184756934643 41.8777085468173, 12.473868615925312 41.876748941838741, 12.47439906001091 41.876975700259209, 12.476041249930859 41.877547264099121, 12.476669482886791 41.877807132899761, 12.477433429965853 41.878120427854448, 12.478880385859187 41.878720248116345, 12.47761619836092 41.8805938065052, 12.476485699415207 41.882226563990116, 12.475920520722866 41.882729314267635, 12.4757729023695 41.882811985909939, 12.473744496703148 41.881357558071613, 12.473015375435352 41.880833238363266, 12.472854740917683 41.880684815347195, 12.472211867570877 41.880175314843655, 12.471523709595203 41.879417791962624, 12.471388585865498 41.879297025501728, 12.471258282661438 41.879084452986717, 12.471107371151447 41.87890600413084, 12.470935739576817 41.878372631967068, 12.470858879387379 41.878228254616261, 12.47083280980587 41.8780422359705, 12.470823846757412 41.8780018389225, 12.47081782668829 41.877871602773666, 12.470801740884781 41.877626091241837, 12.470803394913673 41.877497665584087, 12.47081196308136 41.877407632768154, 12.470824539661407 41.877297446131706, 12.470818869769573 41.877290084958076, 12.470832176506519 41.877242207527161, 12.470884591341019 41.87705360352993, 12.471368037164211 41.875874847173691, 12.471347488462925 41.875788554549217, 12.471433132886887 41.875738337635994, 12.471430666744709 41.875681601464748, 12.471460856497288 41.875621452927589, 12.471420861780643 41.875372849404812, 12.471871756017208 41.8744745105505, 12.472538508474827 41.872948758304119)))";
    public static JtsSpatialContextFactory factory = new JtsSpatialContextFactory();
    public static GeometryFactory geometryFactory = new GeometryFactory();
    public static JtsShapeFactory jtsShapeFactory;

    public static void main(String[] args) throws ParseException {

        //readSpatial(shape2);
        String sha = shape8;

        List<Coordinate[]> coords;


        // Polygons without holes
//        coords = getPolygonCoordinates(sha);
//        for (Coordinate[] c : coords) {
//            createPolygon(c);
//        }

        // Polygons without holes but bad formatted
//        List<String> shapes = parseMultiPolygon(sha);
//        for (String s: shapes) {
//            coords = getMultiPolygonCoordinates(s);
//            for (Coordinate[] c : coords) {
//                createPolygon(c);
//            }
//        }

        // Polygons with holes
//        List<Polygon> polygons = getPolygonCoordinatesHoles(sha);
//        for (Polygon polygon: polygons) {
//            coords = getPolygonCoordinatesHoles(polygon);
//            for (Coordinate[] coordinates : coords) {
//                // new polygon
//                createPolygon(coordinates);
//
//                for (Coordinate coordinate : coordinates) {
//                    // new points
//                }
//            }
//        }

        //        inPolygon(shape);
//        inPolygon(shape);
//        inPolygon(shape2);
    }


    public static Shape readSpatial(String shape) {
        Shape s = null;
        factory.geo = true;
        factory.useJtsPoint = false;
        factory.useJtsLineString = true;
        factory.allowMultiOverlap = true;
        factory.validationRule = ValidationRule.none;
        // TODO: Use default dateline rule and update to support multiline/polygon to resolve wrapping issues
        factory.datelineRule = DatelineRule.none;
        JtsSpatialContext context = new JtsSpatialContext(factory);
        WKTReader wktReader = new WKTReader(context, factory);
        try {
            s = wktReader.parse(shape);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        JtsSpatialContext jtsSpatialContext = factory.newSpatialContext();
        jtsShapeFactory = jtsSpatialContext.getShapeFactory();

        return s;
    }


    public static Shape readPolygon(String shape) {
        Shape s = readSpatial(shape);
        return s;
    }

    public static void inPolygon(String shape) {
        Shape s = readPolygon(shape);

        Geometry g = jtsShapeFactory.getGeometryFrom(s);

        Point pt = geometryFactory.createPoint(new Coordinate(12.446308661736571, 41.89461483246613)); // contains true, covers true

        Point pt2 = geometryFactory.createPoint(new Coordinate(12.445942429915929, 41.895293142536325)); // contains false, covers true

        Point pt3 = geometryFactory.createPoint(new Coordinate(12.445686276662853, 41.89470310039139)); // contains false, convers false

        g.contains(pt);
        g.covers(pt);


        Polygon p = geometryFactory.createPolygon(g.getCoordinates());

        p.contains(pt);

        geometryFactory.createGeometry(g);
    }

    public static List<String> parseHoles(String shape) {
        List<String> parsed = new ArrayList<>();
        if (shape.startsWith("POLYGON") && shape.contains("),")) {
            String[] splittedShape = shape.split("\\),");
            splittedShape[0] = splittedShape[0] + "))";
            for (int i = 1; i < splittedShape.length - 1; i++) {
                splittedShape[i] = "POLYGON (" + splittedShape[i].strip() + "))";
            }
            splittedShape[splittedShape.length - 1] = "POLYGON (" + splittedShape[splittedShape.length - 1].strip();
            parsed = new ArrayList<>(Arrays.asList(splittedShape));
        } else {
            parsed.add(shape);
        }
        return parsed;
    }

    public static List<Coordinate[]> getPolygonCoordinates(String shape) {
        Shape s = readPolygon(shape);
        List<Coordinate[]> cords = new ArrayList<>();
        if (s instanceof JtsGeometry) {
            Geometry j = ((JtsGeometry) s).getGeom();
            if (j instanceof MultiPolygon) {
                for (int i = 0; i < j.getNumGeometries(); i++) {
                    Geometry j1 = j.getGeometryN(i);
                    cords.add(j1.getCoordinates());
                }
            } else
                cords.add(j.getCoordinates());
        } else if (s instanceof Rectangle j) {
            cords.add(new Coordinate[]{
                    new Coordinate(j.getMinX(), j.getMaxY()),
                    new Coordinate(j.getMinX(), j.getMinY()),
                    new Coordinate(j.getMaxX(), j.getMinY()),
                    new Coordinate(j.getMaxX(), j.getMaxY()),
                    new Coordinate(j.getMinX(), j.getMaxY())});
        }
        return cords;
    }

    public static List<Polygon> getPolygonCoordinatesHoles(String shape) {
        Shape s = readPolygon(shape);
        List<Polygon> polygons = new ArrayList<>();
        if (s instanceof JtsGeometry) {
            Geometry j = ((JtsGeometry) s).getGeom();
            if (j instanceof MultiPolygon) {
                for (int i = 0; i < j.getNumGeometries(); i++) {
                    Geometry j1 = j.getGeometryN(i);
                    Polygon p = (Polygon) j1;
                    polygons.add(p);
                }
            } else if (j instanceof Polygon p) {
                polygons.add(p);
            } else
                System.out.println("ERROR");
        } else if (s instanceof Rectangle j) {
            Polygon p = geometryFactory.createPolygon(new Coordinate[]{
                    new Coordinate(j.getMinX(), j.getMaxY()),
                    new Coordinate(j.getMinX(), j.getMinY()),
                    new Coordinate(j.getMaxX(), j.getMinY()),
                    new Coordinate(j.getMaxX(), j.getMaxY()),
                    new Coordinate(j.getMinX(), j.getMaxY())});
            polygons.add(p);
        }
        return polygons;
    }


    public static List<Coordinate[]> getMultiPolygonCoordinates(String shape) {
        Shape s = readPolygon(shape);
        List<Coordinate[]> cords = new ArrayList<>();
        if (s instanceof JtsGeometry) {
            Geometry j = ((JtsGeometry) s).getGeom();
            if (j instanceof MultiPolygon) {
                for (int i = 0; i < j.getNumGeometries(); i++) {
                    Geometry j1 = j.getGeometryN(i);
                    List<String> others = parseHoles(j1.toString());
                    if (others.size() > 1) {
                        for (String oth : others) {
                            Shape s2 = readPolygon(oth);
                            Geometry j2 = ((JtsGeometry) s2).getGeom();
                            cords.add(j2.getCoordinates());
                        }
                    } else
                        cords.add(j1.getCoordinates());
                }
            } else
                cords.add(j.getCoordinates());
        } else if (s instanceof Rectangle j) {
            cords.add(new Coordinate[]{
                    new Coordinate(j.getMinX(), j.getMaxY()),
                    new Coordinate(j.getMinX(), j.getMinY()),
                    new Coordinate(j.getMaxX(), j.getMinY()),
                    new Coordinate(j.getMaxX(), j.getMaxY()),
                    new Coordinate(j.getMinX(), j.getMaxY())});
        }
        return cords;
    }

    public static List<Coordinate[]> getPolygonCoordinatesHoles(Polygon polygon) {
        List<Coordinate[]> cords = new ArrayList<>();
        List<String> holes = parseHoles(polygon.toString());
        if (holes.size() > 1) {
            for (String hole : holes) {
                Shape s = readPolygon(hole);
                Geometry j = ((JtsGeometry) s).getGeom();
                cords.add(j.getCoordinates());
            }
        } else
            cords.add(polygon.getCoordinates());
        return cords;
    }

    public static Polygon createPolygon(Coordinate[] coordinates) {
        Polygon p = geometryFactory.createPolygon(coordinates);
        return p;
    }


    public void JtsGeoshapeHelper() {
        JtsSpatialContextFactory factory = new JtsSpatialContextFactory();
        factory.geo = true;
        factory.useJtsPoint = false;
        factory.useJtsLineString = true;
        // TODO: Use default dateline rule and update to support multiline/polygon to resolve wrapping issues
        factory.datelineRule = DatelineRule.none;
        JtsSpatialContext context = new JtsSpatialContext(factory);
        WKTReader wktReader = new WKTReader(context, factory);
        JtsWKTWriter wktWriter = new JtsWKTWriter(context, factory);
        GeoJSONReader geojsonReader = new GeoJSONReader(context, factory);
        JtsGeoJSONWriter geojsonWriter = new JtsGeoJSONWriter(context, factory);
        JtsBinaryCodec binaryCodec = new JtsBinaryCodec(context, factory);
    }


}
